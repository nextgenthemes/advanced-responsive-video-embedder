(()=>{"use strict";var e={n:t=>{var l=t&&t.__esModule?()=>t.default:()=>t;return e.d(l,{a:l}),l},d:(t,l)=>{for(var a in l)e.o(l,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:l[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,l=window.wp.i18n,a=window.wp.serverSideRender;var r=e.n(a);const n=window.wp.blockEditor,i=window.wp.components,o=window.ARVEsettings,s=window.wp,c=new DOMParser;function u(e){const t=[];return Object.entries(e).forEach((e=>{let[l,a]=e;const r={label:a,value:l};t.push(r)})),t}function d(e){if("string"!=typeof e.description)return"";if("string"==typeof e.descriptionlinktext){const l=e.description.split(e.descriptionlinktext);return(0,t.createElement)("span",null,(0,t.createElement)("span",null,l[0]),(0,t.createElement)("a",{href:e.descriptionlink},e.descriptionlinktext),",",(0,t.createElement)("span",null,l[1]))}return e.description}function p(e,t){const l=m(e,t);return e/l+":"+t/l}function m(e,t){return t?m(t,e%t):e}s.blocks.registerBlockType("nextgenthemes/arve-block",{title:"Video Embed (ARVE)",description:"You can disable help texts on the ARVE settings page to clean up the UI",icon:"video-alt3",category:"embed",supports:{AlignWide:!0,align:["left","right","center","wide","full"]},edit:e=>{const a=function(e){const a=[],r={},s=(0,t.createElement)("p",null,(0,l.__)("To edit the featured image, you need permission to upload media."));let m=!1;Object.values(o).forEach((e=>{r[e.tag]=[]})),Object.entries(o).forEach((a=>{let[o,b]=a,h=e.attributes[o],g="";switch(b.type){case"boolean":"sandbox"===o&&void 0===h&&(h=!0),r[b.tag].push((0,t.createElement)(i.ToggleControl,{key:o,label:b.label,help:d(b),checked:!!h,onChange:t=>e.setAttributes({[o]:t})}));break;case"select":r[b.tag].push((0,t.createElement)(i.SelectControl,{key:o,value:h,label:b.label,help:d(b),options:u(b.options),onChange:t=>e.setAttributes({[o]:t})}));break;case"string":r[b.tag].push((0,t.createElement)(i.TextControl,{key:o,label:b.label,placeholder:b.placeholder,help:d(b),value:h,onChange:t=>(function(e,t,l){if("url"===e){const e=c.parseFromString(t,"text/html").querySelector("iframe");if(e&&e.getAttribute("src")){t=e.src;const a=e.width,r=e.height;a&&r&&l.setAttributes({aspect_ratio:p(a,r)})}}}(o,t,e),e.setAttributes({[o]:t}))}));break;case"attachment_old":g=e.attributes[o+"_url"],r[b.tag].push((0,t.createElement)("div",null,(0,t.createElement)(n.MediaUploadCheck,null,(0,t.createElement)(n.MediaUpload,{onSelect:t=>e.setAttributes({[o]:t.id.toString(),[o+"_url"]:t.url}),allowedTypes:"image",render:e=>{let{open:a}=e;return(0,t.createElement)(i.Button,{className:"components-button--arve-thumbnail",onClick:a,"aria-label":(0,l.__)("Edit or update the image")},!!g&&(0,t.createElement)("div",null,(0,t.createElement)("img",{src:g,alt:(0,l.__)("Selected Thumbnail")})),(0,l.__)("Edit or update the image"))}})),!!h&&(0,t.createElement)(i.Button,{onClick:()=>e.setAttributes({[o]:"",[o+"_url"]:""})},(0,l.__)("Remove Custom Thumbnail")),(0,t.createElement)(i.TextControl,{label:b.label,placeholder:b.placeholder,help:d(b),value:h,onChange:t=>e.setAttributes({[o]:t})})));break;case"attachment":g=e.attributes[o+"_url"],r[b.tag].push((0,t.createElement)("div",{className:"editor-post-featured-image"},(0,t.createElement)(n.MediaUploadCheck,{fallback:s},(0,t.createElement)(n.MediaUpload,{title:(0,l.__)("Thumbnail"),onSelect:t=>(m=t,e.setAttributes({[o]:t.id.toString(),[o+"_url"]:t.url})),unstableFeaturedImageFlow:!0,allowedTypes:"Image",modalClass:"editor-post-featured-image__media-modal",render:e=>{let{open:a}=e;return(0,t.createElement)("div",{className:"editor-post-featured-image__container"},(0,t.createElement)(i.Button,{className:h?"editor-post-featured-image__preview":"editor-post-featured-image__toggle",onClick:a,"aria-describedby":h?`editor-post-featured-image-${h}-describedby`:""},!!h&&!!g&&(0,t.createElement)(i.ResponsiveWrapper,{naturalWidth:640,naturalHeight:380},(0,t.createElement)("img",{src:g,alt:""})),!h&&(0,l.__)("Set Thumbnail")),(0,t.createElement)(i.DropZone,null))},value:h})),!!h&&!!g&&(0,t.createElement)(n.MediaUploadCheck,null,(0,t.createElement)(n.MediaUpload,{title:(0,l.__)("Thumbnail"),onSelect:t=>(m=t,e.setAttributes({[o]:t.id.toString(),[o+"_url"]:t.url})),unstableFeaturedImageFlow:!0,allowedTypes:"image",modalClass:"editor-post-featured-image__media-modal",render:e=>{let{open:a}=e;return(0,t.createElement)(i.Button,{onClick:a,isSecondary:!0},(0,l.__)("Replace Thumbnail"))}})),!!h&&(0,t.createElement)(n.MediaUploadCheck,null,(0,t.createElement)(i.Button,{onClick:()=>e.setAttributes({[o]:"",[o+"_url"]:""}),isLink:!0,isDestructive:!0},(0,l.__)("Remove Thumbnail"))),(0,t.createElement)(i.TextControl,{label:b.label,placeholder:b.placeholder,help:d(b),value:h,onChange:t=>e.setAttributes({[o]:t})})))}}));let b=!0;return Object.keys(r).forEach((e=>{var l;a.push((0,t.createElement)(i.PanelBody,{key:e,title:(l=e,l.charAt(0).toUpperCase()+l.slice(1)),initialOpen:b},r[e])),b=!1})),a}(e);return[(0,t.createElement)(r(),{key:"ssr",block:"nextgenthemes/arve-block",attributes:e.attributes}),(0,t.createElement)(n.InspectorControls,{key:"insp"},a)]},save:()=>null})})();